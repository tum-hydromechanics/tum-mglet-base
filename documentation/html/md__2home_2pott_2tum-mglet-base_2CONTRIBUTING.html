<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mglet-base: Contributing to MGLET-base</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mglet-base
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Contributing to MGLET-base</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>We encourages users to contribute to the development of the code. We are very grateful for any contributions, from minor typos and bug fixes to new models and features.</p>
<p><em><b>Note that no contribution may be accepted unless the contributor agrees with the license terms found in the LICENSE file in the repository's top source directory.</b></em></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Quick Fortran style guide</h1>
<p>This is a quick summary of the Fortran style that are used in MGLET-base:</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Indentation</h2>
<p>Use 4 space characters for indentation. Consider an extra level of indentation for continued lines to emphasize the continuation. Do not use tabs for any purpose, not even within comments (tabs are not allowed in Fortran source files).</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Capitalization</h2>
<p>Use lowercase for all names constructed by the user (variables, subroutines, functions, types, modules etc). Fortran keywords (such as <code>INTEGER</code>, <code>REAL</code>, <code>SUBROUTINE</code>, <code>MODULE</code>, <code>CONTAINS</code>, <code>IF</code> etc.) are preferred in upper case.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Line lengths</h2>
<p>Code lines are not allowed to exceed 80 characters. You are encouraged to limit the line lengths of comments to the same limit, but certain exceptions are be allowed, such as a comment with a URL reference that exceed 80 characters.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
<code>END</code>'s</h2>
<p>Always use <code>END &lt;construct&gt;</code>, for example <code>END DO</code> and not <code>END</code> or <code>ENDDO</code>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Whitespace</h2>
<ul>
<li>Always use a single whitespace after a comma, for example <code>bp(k, j, i)</code>.</li>
<li>There shall be no trailing whitespace. Empty lines are not allowed to have whitespace.</li>
<li>Surround relational operators with a whitespace, e.g. <code>IF (myid == 0)</code>.</li>
<li>In mathematical expressions: if operators with different priorities are used, consider adding whitespace around the operators with the lowest priority(ies).</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Naming conventions</h2>
<ul>
<li>Modules end with the suffix <code>_mod</code></li>
<li>Derived types shall have the suffix <code>_t</code>.</li>
<li><code>kk, jj, ii</code> are used for the grid shape, do not use <code>kmx, jmx, imx</code>.</li>
<li>Avoid variable names that are the same as a Fortran keyword, for instance <code>if</code>, despite that this is allowed in the Fortran language.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Order of variables in argument lists</h2>
<p>It is nearly impossible to deduce a general, hard set of rules for the order of variables in argument lists. However, please try to follow the following guidelines:</p>
<ol type="1">
<li>Array shapes <b>must</b> appear before the array declarations themselves (this is a hard rule), for example use <code>SUBROUTINE myroutine(kk, jj, ii, bp)</code> where <code>bp</code> is an array of shape <code>(kk, jj, ii)</code>.</li>
<li>Indices appear in the order z-y-x, e.g. <code>kk, jj, ii</code>.</li>
<li>Physical coordinates and quantities appear in the order x-y-z, e.g. <code>(dx, dy, dz)</code> and <code>(u, v, w)</code>.</li>
<li>Return values and results, declared as <code>INTENT(out)</code> or <code>INTENT(inout)</code>, appear <em>before</em> pure inputs that are <code>INTENT(in)</code>, e.g. <code>CALL get_mgdims(kk, jj, ii, igrid)</code> because <code>kk, jj, ii</code> are the results of the call and hence appear first, and <code>igrid</code> is an input and appear afterwards.</li>
</ol>
<p>Where Fortran language rules specify certain rules that conflict these, the standard will of course be the deciding factor. For example, optional arguments have to appear at the end, independent of the <code>INTENT</code>.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Relational operators</h2>
<p>Always use the "modern" operators <code>==</code>, <code>/=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code> and not the legacy <code>.EQ.</code>, <code>.NE.</code>, <code>.GT.</code>, <code>.LT.</code>, <code>.GE.</code>, <code>.LE.</code>. Relational operators shall always be surrounded by a whitespace.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Implicit typing and module visibility scopes</h2>
<p>Always have <code>IMPLICIT NONE (type, external)</code> in every module to enforce all interfaces and variables to be explicit and set the default module visibility to <code>PRIVATE</code> except in special cases.</p>
<p>Always declare the <code>kind</code> of <code>REAL</code> and <code>INTEGER</code> whenever possible.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
<code>INTENT</code>'s</h2>
<p>Always declare the <code>INTENT</code> of an argument whenever possible.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
When in doubt</h2>
<p>Look at existing code and use your own judgment.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Timers numbering scheme</h1>
<p>MGLET has a simple internal performance monitoring system using timers. To avoid collisions and conflict of interest between various regions in the code using the same indexes for the timers, this is the rule of assigning numbers:</p>
<ul>
<li>1-199: Used from main program (<code><a class="el" href="mglet_8F90.html">mglet.F90</a></code>) and main time integration (<code><a class="el" href="timeloop__mod_8F90.html">timeloop_mod.F90</a></code>) and core functionality in <a class="el" href="namespacecore__mod.html">core_mod</a></li>
<li>200-299: IB methods and blocking</li>
<li>300-399: Flow solver</li>
<li>400-499: Scalar solver</li>
<li>500-799: Reserved for future use</li>
<li>800-999: Plugins </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
